formula = r"""
class Jailkit < Formula
  desc "Utilities to create limited user accounts in a chroot jail"
  homepage "https://olivier.sessink.nl/jailkit/"
  url "https://olivier.sessink.nl/jailkit/jailkit-2.21.tar.bz2"
  sha256 "db3bb090a4fffdef59b5eafd594478d576cacf84306f9929d0dfbed090cf3687"
  revision 1

  bottle do
    sha256 arm64_big_sur: "9b1811caafbdea42e49b14308f79e70faccbb3f38402184f974e52026c220a57"
    sha256 big_sur:       "58761380572c700e95ae78a62c76fecb897a390837d38748651622b5762c8681"
    sha256 catalina:      "488323402cd9c3487e515ebe4ed8b4e056188af3d125ee063a1056c58c1c61a4"
    sha256 mojave:        "6aeb6044ff3ba537d8575fea45053da11764549b72d545df3b962b6a6d3ee68c"
    sha256 high_sierra:   "7ab554fa425961fe843c0533b360b5f0eb7dcc39ed707e6f757e0c4e328d930c"
  end

  depends_on "python@3.9"

  def install
    ENV["PYTHONINTERPRETER"] = Formula["python@3.9"].opt_bin/"python3"

    system "./configure", "--prefix=#{prefix}", "--disable-debug", "--disable-dependency-tracking"
    system "make", "install"
  end
end

"""

import "homebrew-install" as hi

import "gdbm" as i0, "mpdecimal" as i1, "openssl@1.1" as i2, "pkg-config" as i3, "python@3.9" as i4, "readline" as i5, "sqlite" as i6, "xz" as i7

pkg(
  name: "jailkit",
  version: "2.21",
  dependencies: [hi, i0, i1, i2, i3, i4, i5, i6, i7],

  def install(ctx) {
    ctx.write_file(join(ctx.build, "jailkit.rb"), formula)
    ctx.system("homebrew-install", ctx.prefix, ctx.state_dir, "./jailkit.rb")
  }
)
