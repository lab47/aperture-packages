formula = r"""
class Trimage < Formula
  desc "Cross-platform tool for optimizing PNG and JPG files"
  homepage "https://trimage.org"
  url "https://github.com/Kilian/Trimage/archive/1.0.6.tar.gz"
  sha256 "60448b5a827691087a1bd016a68f84d8c457fc29179271f310fe5f9fa21415cf"
  license "MIT"
  revision 2

  bottle do
    sha256 cellar: :any_skip_relocation, arm64_big_sur: "1a6dca1721ee66b96bcc5f010fb96657024b17059eefc82db0e61c6e2ff12a21"
    sha256 cellar: :any_skip_relocation, big_sur:       "eb3768183ebb466b03e1134b498a0331e43f9aa19ca2f5fb3550f14bf28c1998"
    sha256 cellar: :any_skip_relocation, catalina:      "2174157bed654961ae8f5b1b60653c40a6a336aa4f26292ebe842d02652c62c5"
    sha256 cellar: :any_skip_relocation, mojave:        "638e2b76d476287fad690b99c20759798e1eab19bf3beadfad35c8f177bd59c8"
  end

  depends_on "advancecomp"
  depends_on "jpegoptim"
  depends_on "optipng"
  depends_on "pngcrush"
  depends_on "pyqt@5"
  depends_on "python@3.9"

  def install
    system "#{Formula["python@3.9"].opt_bin}/python3", "setup.py", "build"
    system "#{Formula["python@3.9"].opt_bin}/python3", "setup.py", "install", "--prefix=#{prefix}"
  end

  test do
    cp test_fixtures("test.png"), testpath
    cp test_fixtures("test.jpg"), testpath
    assert_match "New Size", shell_output("#{bin}/trimage -f #{testpath}/test.png 2>1")
    assert_match "New Size", shell_output("#{bin}/trimage -f #{testpath}/test.jpg 2>1")
  end
end

"""

import "homebrew-install" as hi

import "advancecomp" as i0, "autoconf" as i1, "automake" as i2, "berkeley-db" as i3, "bison" as i4, "bzip2" as i5, "expat" as i6, "flex" as i7, "gdbm" as i8, "gettext" as i9, "gperf" as i10, "help2man" as i11, "jpeg" as i12, "jpegoptim" as i13, "libffi" as i14, "libpng" as i15, "libtool" as i16, "libxml2" as i17, "m4" as i18, "mpdecimal" as i19, "ncurses" as i20, "openssl@1.1" as i21, "optipng" as i22, "perl" as i23, "pkg-config" as i24, "pngcrush" as i25, "pyqt-builder" as i26, "pyqt@5" as i27, "python@3.9" as i28, "qt@5" as i29, "readline" as i30, "sip" as i31, "sqlite" as i32, "unzip" as i33, "xz" as i34, "zip" as i35, "zlib" as i36

pkg(
  name: "trimage",
  version: "1.0.6",
  dependencies: [hi, i0, i1, i2, i3, i4, i5, i6, i7, i8, i9, i10, i11, i12, i13, i14, i15, i16, i17, i18, i19, i20, i21, i22, i23, i24, i25, i26, i27, i28, i29, i30, i31, i32, i33, i34, i35, i36],

  def install(ctx) {
    ctx.write_file(join(ctx.build, "trimage.rb"), formula)
    ctx.system("homebrew-install", ctx.prefix, ctx.state_dir, "./trimage.rb")
  }
)
