import fetch, lua

pkg(
  name: "luarocks"
  version: "3.3.1"
  input: fetch.archive(
    url: "https://luarocks.org/releases/luarocks-3.3.1.tar.gz",
    sum: ("etag", "5fd24896-3afe4"),
  )
  dependencies: [lua]

  def install(ctx) {
    ctx.system("./configure",
                  "--prefix="+ctx.prefix,
                  "--sysconfdir="+ctx.prefix+"/etc")
    ctx.system("make", "install")
  }
)
